

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.2.x から 3.0.0 へのアップグレード &mdash; CodeIgniter 3.2.0-dev ドキュメント</title>
  

  
  
    <link rel="shortcut icon" href="../_static/ci-icon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/citheme.css" type="text/css" />
  

  
    <link rel="top" title="CodeIgniter 3.2.0-dev ドキュメント" href="../index.html"/>
        <link rel="up" title="以前のバージョンからのアップグレード" href="upgrading.html"/>
        <link rel="next" title="Upgrading from 2.2.2 to 2.2.3" href="upgrade_223.html"/>
        <link rel="prev" title="3.0.0 から 3.0.1 へのアップグレード" href="upgrade_301.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div id="nav">
  <div id="nav_inner">
    
    
    
      <div id="pulldown-menu" class="ciNav">
        <ul>
<li class="toctree-l1"><a class="reference internal" href="../general/welcome.html">CodeIgniter へようこそ</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">インストール方法</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="downloads.html">CodeIgniter のダウンロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html">インストール方法</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="upgrading.html">以前のバージョンからのアップグレード</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">トラブルシューティング</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">CodeIgniter 概要</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/getting_started.html">CodeIgniter をはじめよう</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/at_a_glance.html">CodeIgniter の簡単な紹介</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/features.html">CodeIgniter の機能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/appflow.html">アプリケーションフローチャート</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/mvc.html">Model-View-Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/goals.html">設計とアーキテクチャのゴール</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">チュートリアル</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/static_pages.html">静的なページ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/news_section.html">ニュースセクション</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/create_news_items.html">ニュース記事を作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/conclusion.html">おわりに</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">CodeIgniter への貢献</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../documentation/index.html">CodeIgniter のドキュメントを書く</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DCO.html">Developer&#8217;s Certificate of Origin 1.1</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">一般的なトピック</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/urls.html">CodeIgniter の URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/controllers.html">コントローラ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/reserved_names.html">予約語</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/views.html">ビュー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/models.html">モデル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/helpers.html">ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/libraries.html">CodeIgniter のライブラリの利用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/creating_libraries.html">ライブラリの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/drivers.html">CodeIgniter のドライバを使う</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/creating_drivers.html">ドライバの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/core_classes.html">コアシステムクラスの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/ancillary_classes.html">補助的なクラス作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/hooks.html">フック――フレームワークコアの拡張</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/autoloader.html">リソースのオートロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/common_functions.html">共通関数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/compatibility_functions.html">互換関数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/routing.html">URI ルーティング</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/errors.html">エラー処理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/caching.html">キャッシュ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/profiling.html">アプリケーションのプロファイリング</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/cli.html">CLI で実行する</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/managing_apps.html">アプリケーションの管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/environments.html">複数環境への対応</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/alternative_php.html">ビューファイルでの PHP の代替構文</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/security.html">セキュリティ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/styleguide.html">PHP スタイルガイド</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">ライブラリ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../libraries/benchmark.html">ベンチマーククラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/caching.html">キャッシングドライバ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/calendar.html">カレンダークラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/cart.html">ショッピングカートクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/config.html">設定クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/email.html">Email クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encrypt.html">Encrypt クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encryption.html">Encryption ライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/file_uploading.html">ファイルアップロードクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/form_validation.html">フォームバリデーション（検証）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/ftp.html">FTP クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/image_lib.html">画像操作クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/input.html">入力クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/javascript.html">JavaScript クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/language.html">言語クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/loader.html">ローダ（読み込み処理）クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/migration.html">マイグレーションクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/output.html">出力クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/pagination.html">ページネーションクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/parser.html">テンプレートパーサクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/security.html">セキュリティクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/sessions.html">セッションライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/table.html">HTML テーブルクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/trackback.html">トラックバッククラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/typography.html">タイポグラフィークラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/unit_testing.html">ユニットテストクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html">URI クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/user_agent.html">ユーザエージェントクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/xmlrpc.html">XML-RPC および XML-RPC サーバクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/zip.html">Zip 圧縮クラス</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">データベースリファレンス</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/examples.html">クイックスタート: 使用例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/configuration.html">データベース設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/connecting.html">データベースへの接続</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/queries.html">クエリの実行</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/results.html">クエリ結果の生成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/helpers.html">クエリヘルパー関数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/query_builder.html">クエリビルダクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/transactions.html">トランザクション</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/metadata.html">メタデータの取得</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/call_function.html">カスタム関数呼び出し</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/caching.html">クエリキャッシュ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/forge.html">データベースフォージを使用したデータベース操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/utilities.html">データベースユーティリティクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/db_driver_reference.html">データベースドライバリファレンス</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">ヘルパー</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../helpers/array_helper.html">配列ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/captcha_helper.html">キャプチャ ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/cookie_helper.html">Cookie ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/date_helper.html">日付ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/directory_helper.html">ディレクトリヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/download_helper.html">ダウンロードヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/email_helper.html">eメールヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/file_helper.html">ファイルヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/form_helper.html">フォームヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/html_helper.html">HTML ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/inflector_helper.html">語形変換ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/language_helper.html">言語ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/number_helper.html">数字ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/path_helper.html">パスヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/security_helper.html">セキュリティヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/smiley_helper.html">スマイリーヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/string_helper.html">文字列ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/text_helper.html">テキストヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/typography_helper.html">タイポグラフィーヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/url_helper.html">URL ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/xml_helper.html">XML ヘルパー</a></li>
</ul>
</li>
</ul>

      </div>
    
      
  </div>
</div>
<div id="nav2">
  <a href="#" id="openToc">
    <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAARgAA/+4ADkFkb2JlAGTAAAAAAf/bAIQABAMDAwMDBAMDBAYEAwQGBwUEBAUHCAYGBwYGCAoICQkJCQgKCgwMDAwMCgwMDQ0MDBERERERFBQUFBQUFBQUFAEEBQUIBwgPCgoPFA4ODhQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/8AAEQgAKwCaAwERAAIRAQMRAf/EAHsAAQAABwEBAAAAAAAAAAAAAAABAwQFBgcIAgkBAQAAAAAAAAAAAAAAAAAAAAAQAAEDAwICBwYEAgsAAAAAAAIBAwQAEQUSBiEHkROTVNQWGDFBUVIUCHEiMtOUFWGBobHRQlMkZIRVEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwDSC+ygkOOaUoKigUCgUCgUCgUCgUCgUCgUCgkuGguIP9FBMFb0Hqg7We+3jlmIqqYFf4ub+/QYlnOR/LqIBKGFUbf8qWv971BytQXXE7Y3Lnm3HsFhp2TaZJAdchRXpIgSpdEJWxJEW3xoKV7F5OMy7JkQn2o7D6w33XGjEAkoiqrJEqIiOIiKuhePCgqp22dyYyS3CyWHnQ5joG61HkRnmnTbaFSMhExRVQRRVJU9iUHjE7ez+fJ0MFipmUNhBV8YUd2SoIV9KkjQla9ltegttBdPLW4/qocL+UTfrMiHW4+P9M71shuyrqaHTcxsl7jegpsji8nh5ZwMvDfgTm0RTjSmjYdFCS6KoOIipdFunCgmNYTMv457MMY6U7iI6oMieDDhRm1VbIhuoOkbqtuK0Hpzb+eZcYZexUxt6UyUqK2cd0SdjtgrhOgijcgERUlJOCIl6CpgbP3blRI8XgMjNARAyKNDfeRBdFDBVUAXgQrqH4pxoJTu2NysY97LP4ac1io5q1InHFeGO24LnVKJuKOkSQ/yKir+rh7aCLG1dzypZQI2FnvTgccYOM3FeN0XWERXAUEFVQgQkUktdLpegm+Td3/Xli/L+S/mYNJIOF9G/wBeLKrZHFb0akG6W1WtQWSg3Dyg5e7V3fipE3O4/wCrktyzYA+ufas2LbZIlmnAT2kvuoN1wft95augilglX/tzP3qCu9O3LL/wV/i5v79BvmTADq14UGu91467Z6U9y0HzH/ncj/U/sT/CgynZG7I2NezpZGUjIycJkYkZSG+uQ81pbBNKLxJfjwoMqZ3/ALYHl35AJ7/cuwHcu5k7r1Q5pHetBjquqVVJWGxj9Zrtcl/Ggy3dHMvauR3HFZj5nHNxSyW5JISYDMoIwx8tFIGHZhPNaykGapr6rUAiicEoMG21lMRj8buPAz8xhJrr7uOeiPTCyAwXUaGR1mgozbTusOsFLEiJ7fbQa/h7gcjy2H3V6xppwDNtUSxCJIqp7valBuWVzJ22xuCROXNNZiJkMtms0DbjUkAZjzoDrTMd9dDRI44ZC2YsrYdKWP2WDT2S3N9dNdlRYrGMYc06IURXSYb0igrpWS485xVNS6nF4rwslkoMwnbpgZLB7bmt5uMweAhDEl4B5uSLzzqTnnyVpW2jaJHRMSIjdDiiotvy3DOE5rYTEbkl5yFn28k7JyG4c7AU2HtLH1uKfaiMPI40CdYbpNtmLdwTSn5rewLNld+7TLdeal4WarWBkbVKBjgdElMJJwAAY5fl4kB3b1fp4XvagsGS3FjJfLzDNtS8aeXx7LzT7TyzByQE5PccRGRC0ZRUDRV6y62vbjagzLmJzS2vuPK43JY6aP1TW6Jz+RIWyFtyC06y3EkiiinAo7YCqfq1AqqnGgsOH3lhZO8d1pmcpB8j5XIm9OYlBJSQ/FSS4427DKO0RC8AlcEMhFdViRR1WDWR5t3WXVuL1d106kG9vdeye2g60+1FDyW0shIcXVpyroXt8I8dfd+NB1vioAdWnD3UF1+gD4UFc6CEKpagxXN43rwJLUHz7yX2c8zokt9uHlsPIhA4aRnnHJTLptIS6CNsY7iASpxUUMkReGpfbQW0vtN5pitvrsN28rwtBD0nc0+/Yft5XhaB6TuaXfsP28rwtA9J3NPv2H7eV4Wgek7mn37D9vK8LQPSdzT79h+3leFoHpO5pd+w/byvC0D0nc0u/Yft5XhaB6TuaXfsP28rwtA9J3NLv2H7eV4Wgek7ml37D9vK8LQPSdzS79h+3leFoHpO5p9+w/byvC0E9r7Reazy2HIYVPxkS/CUHVn26cosxyv2g7h89LYmZSXOenvLEQ1YaQ222RATcQCP8rSGqqA8S02W2pQ6FhMoAIlqCtsnwoCpdKClejI4i3Sgtb+GBxVuNBSFt1pV/RQefLjPyUDy4z8lA8uM/JQPLjPyUDy4z8lA8uM/JQPLjPyUDy4z8lA8uM/JQPLjPyUDy4z8lA8utJ/koJ7WCbBU/LQXOPAFq1koK8B0pag90CggtBBf6qB0UDooHRQOigdFA6KB0UDooHRQOigdFA6KB0UDooI0EaBQf//Z" title="Toggle Table of Contents" alt="Toggle Table of Contents" />
  </a>
</div>

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> CodeIgniter</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../general/welcome.html">CodeIgniter へようこそ</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">インストール方法</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="downloads.html">CodeIgniter のダウンロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html">インストール方法</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="upgrading.html">以前のバージョンからのアップグレード</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">トラブルシューティング</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">CodeIgniter 概要</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/getting_started.html">CodeIgniter をはじめよう</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/at_a_glance.html">CodeIgniter の簡単な紹介</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/features.html">CodeIgniter の機能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/appflow.html">アプリケーションフローチャート</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/mvc.html">Model-View-Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/goals.html">設計とアーキテクチャのゴール</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">チュートリアル</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/static_pages.html">静的なページ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/news_section.html">ニュースセクション</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/create_news_items.html">ニュース記事を作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial/conclusion.html">おわりに</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">CodeIgniter への貢献</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../documentation/index.html">CodeIgniter のドキュメントを書く</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DCO.html">Developer&#8217;s Certificate of Origin 1.1</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">一般的なトピック</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general/urls.html">CodeIgniter の URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/controllers.html">コントローラ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/reserved_names.html">予約語</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/views.html">ビュー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/models.html">モデル</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/helpers.html">ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/libraries.html">CodeIgniter のライブラリの利用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/creating_libraries.html">ライブラリの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/drivers.html">CodeIgniter のドライバを使う</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/creating_drivers.html">ドライバの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/core_classes.html">コアシステムクラスの作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/ancillary_classes.html">補助的なクラス作成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/hooks.html">フック――フレームワークコアの拡張</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/autoloader.html">リソースのオートロード</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/common_functions.html">共通関数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/compatibility_functions.html">互換関数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/routing.html">URI ルーティング</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/errors.html">エラー処理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/caching.html">キャッシュ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/profiling.html">アプリケーションのプロファイリング</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/cli.html">CLI で実行する</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/managing_apps.html">アプリケーションの管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/environments.html">複数環境への対応</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/alternative_php.html">ビューファイルでの PHP の代替構文</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/security.html">セキュリティ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/styleguide.html">PHP スタイルガイド</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">ライブラリ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../libraries/benchmark.html">ベンチマーククラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/caching.html">キャッシングドライバ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/calendar.html">カレンダークラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/cart.html">ショッピングカートクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/config.html">設定クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/email.html">Email クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encrypt.html">Encrypt クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/encryption.html">Encryption ライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/file_uploading.html">ファイルアップロードクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/form_validation.html">フォームバリデーション（検証）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/ftp.html">FTP クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/image_lib.html">画像操作クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/input.html">入力クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/javascript.html">JavaScript クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/language.html">言語クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/loader.html">ローダ（読み込み処理）クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/migration.html">マイグレーションクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/output.html">出力クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/pagination.html">ページネーションクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/parser.html">テンプレートパーサクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/security.html">セキュリティクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/sessions.html">セッションライブラリ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/table.html">HTML テーブルクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/trackback.html">トラックバッククラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/typography.html">タイポグラフィークラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/unit_testing.html">ユニットテストクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/uri.html">URI クラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/user_agent.html">ユーザエージェントクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/xmlrpc.html">XML-RPC および XML-RPC サーバクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libraries/zip.html">Zip 圧縮クラス</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">データベースリファレンス</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database/examples.html">クイックスタート: 使用例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/configuration.html">データベース設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/connecting.html">データベースへの接続</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/queries.html">クエリの実行</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/results.html">クエリ結果の生成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/helpers.html">クエリヘルパー関数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/query_builder.html">クエリビルダクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/transactions.html">トランザクション</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/metadata.html">メタデータの取得</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/call_function.html">カスタム関数呼び出し</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/caching.html">クエリキャッシュ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/forge.html">データベースフォージを使用したデータベース操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/utilities.html">データベースユーティリティクラス</a></li>
<li class="toctree-l2"><a class="reference internal" href="../database/db_driver_reference.html">データベースドライバリファレンス</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">ヘルパー</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../helpers/array_helper.html">配列ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/captcha_helper.html">キャプチャ ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/cookie_helper.html">Cookie ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/date_helper.html">日付ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/directory_helper.html">ディレクトリヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/download_helper.html">ダウンロードヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/email_helper.html">eメールヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/file_helper.html">ファイルヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/form_helper.html">フォームヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/html_helper.html">HTML ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/inflector_helper.html">語形変換ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/language_helper.html">言語ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/number_helper.html">数字ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/path_helper.html">パスヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/security_helper.html">セキュリティヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/smiley_helper.html">スマイリーヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/string_helper.html">文字列ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/text_helper.html">テキストヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/typography_helper.html">タイポグラフィーヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/url_helper.html">URL ヘルパー</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/xml_helper.html">XML ヘルパー</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">CodeIgniter</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="index.html">インストール方法</a> &raquo;</li>
      
        <li><a href="upgrading.html">以前のバージョンからのアップグレード</a> &raquo;</li>
      
    <li>2.2.x から 3.0.0 へのアップグレード</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
    <div style="float:right;margin-left:5px;" id="closeMe">
      <img title="Classic Layout" alt="classic layout" src="data:image/gif;base64,R0lGODlhFAAUAJEAAAAAADMzM////wAAACH5BAUUAAIALAAAAAAUABQAAAImlI+py+0PU5gRBRDM3DxbWoXis42X13USOLauUIqnlsaH/eY6UwAAOw==" />
    </div>
  </ul>
<div style="float:right;margin-left:5px;">[ <a href="https://github.com/codeigniter-jp/ci-ja/blob/develop/user_guide_ja_src/source/installation/upgrade_300.rst">旧版翻訳途中</a> | <a href="https://github.com/bcit-ci/CodeIgniter/commits/develop/user_guide_src/source/installation/upgrade_300.rst">原文履歴</a> | <a href="https://github.com/codeigniter-jp/user_guide_src_ja/commits/develop_japanese/source/installation/upgrade_300.rst">翻訳履歴</a> | <a href="https://github.com/codeigniter-jp/user_guide_src_ja/blob/develop_japanese/source/installation/upgrade_300.rst">GitHubで修正</a> ]</div><br /><div style="float:right;margin-left:5px;">[ <b class="highlighted">翻訳者募集中</b> → <a href="https://docs.google.com/spreadsheets/d/1ZWD5XqwH-Uo9X7MR644jbL6O8p5LxIngLT8M547H8wc/edit?pref=2&pli=1#gid=0">翻訳状況</a> ]</div>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="x-3-0-0">
<h1>2.2.x から 3.0.0 へのアップグレード<a class="headerlink" href="#x-3-0-0" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>アップグレードを行う前に、 index.php ファイルを静的ページに置き換えて、サイトをオフラインにする必要があります。</p>
<div class="section" id="step-1-codeigniter">
<h2>Step 1: CodeIgniter ファイルを更新する<a class="headerlink" href="#step-1-codeigniter" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><em>system/</em> ディレクトリのすべてのファイルと index.php を新しいものに
<strong>置き換えてください</strong>。index.php に何か変更を加えていた場合、
新しいファイルに再度適用する必要があります。</p>
<div class="admonition important">
<p class="first admonition-title">重要</p>
<p class="last">まず、古い <em>system/</em> ディレクトリを削除し、
それから新しいものを配置する必要があります。単にコピーペーストすると、
問題が生じる可能性があります。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">もし独自に開発したファイルをこれらのフォルダに入れているなら、
新しいもので置き換える前にコピーを取ってください。</p>
</div>
</div>
<div class="section" id="step-2">
<h2>Step 2: クラスファイルの名前を更新する<a class="headerlink" href="#step-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>CodeIgniter 3.0 以降、全てのクラスファイル
（ライブラリ、ドライバ、コントローラ、そしてモデル）の名前は Ucfirst 形式、
つまり大文字で始まるようにしなければなりません。</p>
<p>例えば、あなたが次のようなライブラリを持っているなら:</p>
<blockquote>
<div>application/libraries/mylibrary.php</div></blockquote>
<p>このようにファイル名を変更します:</p>
<blockquote>
<div>application/libraries/Mylibrary.php</div></blockquote>
<p>ドライバライブラリ、それから CodeIgniter 付属の
コアクラスやライブラリを拡張や置き換えしている場合も同様です。</p>
<blockquote>
<div>application/libraries/MY_email.php
application/core/MY_log.php</div></blockquote>
<p>これらのファイル名は次のように変更します:</p>
<blockquote>
<div>application/libraries/MY_Email.php
application/core/MY_Log.php</div></blockquote>
<p>コントローラ:</p>
<blockquote>
<div>application/controllers/welcome.php     -&gt;      application/controllers/Welcome.php</div></blockquote>
<p>モデル:</p>
<blockquote>
<div>application/models/misc_model.php       -&gt;      application/models/Misc_model.php</div></blockquote>
<p>このルールはディレクトリ名、設定ファイル、ビュー、ヘルパー、フック等には適用
されません。クラスのみが対象です。</p>
<p>まとめると、次のシンプルな 1 つのルールになります。
クラス名は Ucfirst、それ以外は小文字です。</p>
</div>
<div class="section" id="step-3-config-mimes-php">
<h2>Step 3: config/mimes.php を置き換える<a class="headerlink" href="#step-3-config-mimes-php" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>より多くの MIME タイプを含むように更新されています。
これを <em>application/config/mimes.php</em> にコピーしてください.</p>
</div>
<div class="section" id="step-4-config-autoload-php-autoload-core">
<h2>Step 4: config/autoload.php から $autoload[&#8216;core&#8217;] を削除する<a class="headerlink" href="#step-4-config-autoload-php-autoload-core" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal"><span class="pre">$autoload['core']</span></code> は CodeIgniter 1.4.1 で非推奨になっていましたが、ついに削除されました。
もし何か指定されていれば <code class="docutils literal"><span class="pre">$autoload['libraries']</span></code> に移動してください。</p>
</div>
<div class="section" id="step-5-log">
<h2>Step 5: Log クラスへの拡張・置き換えを移動する<a class="headerlink" href="#step-5-log" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Log クラスは &#8220;core&#8221; クラスとして扱われるようになったため、
<strong>system/core/</strong> ディレクトリに移動されました。もし Log クラスを拡張・置き換えて
いた場合、それらのファイルを <strong>application/core/</strong> に移動してください:</p>
<blockquote>
<div>application/libraries/Log.php -&gt; application/core/Log.php
application/libraries/MY_Log.php -&gt; application/core/MY_Log.php</div></blockquote>
</div>
<div class="section" id="step-6">
<h2>Step 6: セッションライブラリの使い方を更新する<a class="headerlink" href="#step-6" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href="../libraries/sessions.html"><span class="doc">セッションライブラリ</span></a> は CodeIgniter 3 で刷新され、
様々な新機能が追加されています。
しかし同時に、注意の必要な変更も加えられています。</p>
<p>最も大きな変更は、（暗号化された）クッキーの代わりに
独立したストレージを使うようになったことです。
データの格納先としてのクッキーは完全に廃止されたので、
今後はサーバ上の何らかのストレージエンジンを使わなければなりません。
デフォルトではファイルシステムが使われます。</p>
<p>新しいセッションクラスは PHP のカスタムセッションハンドラを利用しています。
これによりスーパーグローバルの <code class="docutils literal"><span class="pre">$_SESSION</span></code> からも
セッションデータにアクセスできるようになりました
（これまで同様 &#8220;userdata&#8221; としても使えます）。</p>
<p>設定オプションも追加・削除されています。
詳しくは <a class="reference internal" href="../libraries/sessions.html"><span class="doc">セッションライブラリのマニュアル</span></a> を
すべて読まれることをお勧めしますが、
ここでもいくつかのポイントを説明します。</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">$config['sess_driver']</span></code> を設定する</p>
<p>デフォルトは &#8216;files&#8217; ですが、もしあなたが
<code class="docutils literal"><span class="pre">$config['sess_use_database']</span></code> を設定していた場合は
&#8216;database&#8217; になります。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">$config['sess_save_path']</span></code> を設定する</p>
<p>&#8216;database&#8217; ドライバでは <code class="docutils literal"><span class="pre">$config['sess_table_name']</span></code> に
フォールバックしますが、それ以外のドライバではマニュアルを参照して
選択したドライバでの適切な値を設定する必要があります。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">ci_sessions</span></code> テーブルを変更する（&#8217;database&#8217; ドライバのみ）</p>
<p>テーブルの構造がすこし変更されています。具体的には:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">session_id</span></code> 列は <code class="docutils literal"><span class="pre">id</span></code> に名前が変わりました</li>
<li><code class="docutils literal"><span class="pre">user_agent</span></code> 列は削除されました</li>
<li><code class="docutils literal"><span class="pre">user_data</span></code> 列は <code class="docutils literal"><span class="pre">data</span></code> に名前が変わり、 MySQL では BLOB 型が使われます</li>
<li><code class="docutils literal"><span class="pre">last_activity</span></code> 列は <code class="docutils literal"><span class="pre">timestamp</span></code> に名前が変わりました</li>
</ul>
</div></blockquote>
<p>これに伴いインデックスの更新も必要です。
詳しくは <a class="reference external" href="../libraries/sessions.html#database-driver">Session Database ドライバ</a> の説明を参照してください。</p>
<div class="admonition important">
<p class="first admonition-title">重要</p>
<p class="last">現在公式にサポートしているのは MySQL と PostgreSQL のみです。
他のデータベースでも動作するかもしれませんが、助言ロックがないために
同時アクセスに対して安全ではありません。
この場合は他のドライバを検討してください。</p>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">$config['sess_match_useragent']</span></code> を削除する</p>
<p>ユーザエージェント文字列はブラウザから提供される値、つまりクライアントからの
入力値です。これを検証しても意味がないので、
この機能は廃止されました。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">$config['sess_encrypt_cookie']</span></code> を削除する</p>
<p>前述の通り、今後クッキーにセッションデータが格納されることは
ありませんから、このオプションもお役御免になりました。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">$config['sess_expire_on_close']</span></code> を削除する</p>
<p>このオプションはまだ使えますが、後方互換性のためだけに残されています。
同じ効果は <code class="docutils literal"><span class="pre">$config['sess_expiration']</span></code> を 0 に設定することで
得ることができます。</p>
</li>
<li><p class="first">&#8220;flashdata&#8221; と &#8220;userdata&#8221; の衝突をチェックする</p>
<p>フラッシュデータは次のリクエストで削除するようにマークされている以外は
ただの &#8220;userdata&#8221; になりました。つまり、同じ名前の &#8220;userdata&#8221; と
&#8220;flashdata&#8221; を別々に扱うことはできません。</p>
</li>
<li><p class="first">セッションメタデータをチェックする</p>
<p>これまでは &#8216;session_id&#8217; 、&#8217;ip_address&#8217; 、&#8217;user_agent&#8217; 、&#8217;last_activity&#8217;
といったメタデータにも userdata としてアクセスできました。
今後はできませんので、もしこれらのデータを利用しているなら、
<a class="reference external" href="../libraries/sessions.html#accessing-session-metadata">セッションメタデータ</a>
に関する説明を参照してください。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">unset_userdata()</span></code> の使い方をチェックする</p>
<p>これまでは <code class="docutils literal"><span class="pre">'key'</span> <span class="pre">=&gt;</span> <span class="pre">'dummy</span> <span class="pre">value'</span></code> といった連想配列で、
一度に複数のキーを削除することができました。
しかし、この方法は無意味なので、
今後はキー <em>だけ</em> を配列の要素として渡さなければなりません。</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="c1">// 以前</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">session</span><span class="o">-&gt;</span><span class="na">unset_userdata</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;item&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;item2&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>

<span class="c1">// 今後</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">session</span><span class="o">-&gt;</span><span class="na">unset_userdata</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;item&#39;</span><span class="p">,</span> <span class="s1">&#39;item2&#39;</span><span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>最後に、もしセッションを拡張して使っていたら、
<em>application/libraries/Session/</em> ディレクトリに移動してください。
たぶん、コードの書き換えも必要でしょうが。</p>
</div>
<div class="section" id="step-7-config-database-php">
<h2>Step 7: config/database.php を更新する<a class="headerlink" href="#step-7-config-database-php" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>3.0.0 で Active Record から Query Builder に名前が変更されたので、
<strong>config/database.php</strong> の <code class="docutils literal"><span class="pre">$active_record</span></code> 変数も
<code class="docutils literal"><span class="pre">$query_builder</span></code> に変更する必要があります:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="nv">$active_group</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">;</span>
<span class="c1">// $active_record = TRUE;</span>
<span class="nv">$query_builder</span> <span class="o">=</span> <span class="k">TRUE</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="step-8">
<h2>Step 8: エラーテンプレートを置き換える<a class="headerlink" href="#step-8" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>CodeIgniter 3.0 ではエラーテンプレートもビューとして扱われ、
<em>application/views/errors</em> ディレクトリに移動されました。</p>
<p>また、CLI 向けにプレインテキストのエラーテンプレートを
サポートするようになりました。これも新たに分ける必要があります。</p>
<p>これまでのテンプレートは <em>application/errors</em> から <em>application/views/errors/html</em> にそのまま移動して構いませんが、
新しい <em>application/views/errors/cli</em> ディレクトリは CodeIgniter のアーカイブからコピーしてください。</p>
</div>
<div class="section" id="step-9-config-routes-php">
<h2>Step 9: config/routes.php ファイルを更新する<a class="headerlink" href="#step-9-config-routes-php" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="any">
<h3>:any を含むルート<a class="headerlink" href="#any" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>歴史的に、 CodeIgniter はこれまでずっとワイルドカード <strong>:any</strong> を
提供してきました。これは URI セグメント <strong>内</strong> で
任意の文字列にマッチします。</p>
<p>しかし実際の <strong>:any</strong> は <strong>.+</strong> という正規表現のエイリアスとして
処理されていました。この正規表現は URI セグメントの
区切り文字である /（スラッシュ）にもマッチするため、
意図しない挙動を生むことになります。これはバグと考えられます。</p>
<p>CodeIgniter 3 では <strong>:any</strong> が <strong>[^/]+</strong> を表わすようになり、
スラッシュにマッチすることはなくなりました。</p>
<p>一方でこのバグを活用していた開発者もたくさんいることでしょう。
もしあなたがその一人で、引き続きスラッシュにマッチさせたいなら、
正規表現 <strong>.+</strong> を使ってください:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">.+</span><span class="p">)</span>    <span class="c1">// 全ての文字にマッチする</span>
<span class="p">(</span><span class="o">:</span><span class="nx">any</span><span class="p">)</span>  <span class="c1">// &#39;/&#39; 以外、全ての文字にマッチする</span>
</pre></div>
</div>
</div>
<div class="section" id="default-controller-404-override">
<h3>ディレクトリと &#8216;default_controller&#8217;、&#8216;404_override&#8217;<a class="headerlink" href="#default-controller-404-override" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ご存じのように <code class="docutils literal"><span class="pre">$route['default_controller']</span></code> と
<code class="docutils literal"><span class="pre">$route['404_override']</span></code> の設定は、コントローラ名だけでなく、
<em>コントローラ/メソッド</em> のペアも受け取ります。しかしながら、ルーティングロジック
にバグがあり、
<em>ディレクトリ/コントローラ</em> として使っているユーザがみられます。</p>
<p>この振る舞いは意図したものではなく、偶然であり文書化もされていません。
もしあなたのアプリケーションがこれを使っていたら、CodeIgniter 3.0 では動かなく
なります。</p>
<p>バージョン 3 における他の言及すべき変更は、&#8217;default_controller&#8217; と
&#8216;404_override&#8217; が <em>ディレクトリ毎に</em> 適用されることです。説明のために、
以下の例を用います:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="nv">$route</span><span class="p">[</span><span class="s1">&#39;default_controller&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;main&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p>あなたの Web サイトが <em>example.com</em> にあるとすると、ユーザが
<code class="docutils literal"><span class="pre">http://example.com/</span></code> にアクセスすると、上記の設定が
&#8216;Main&#8217; コントローラをロードします。</p>
<p>ところで、もし <em>application/controllers/admin/</em> ディレクトリがあり、
ユーザが <code class="docutils literal"><span class="pre">http://example.com/admin/</span></code> にアクセスしたらどうなるでしょう？
CodeIgniter 3 では、ルータが admin/ ディレクトリの下の &#8216;Main&#8217; コントローラ
を探します。見つからなければ、Not Found（404）が起こります。</p>
<p>同じルールが &#8216;404_override&#8217; 設定にも適用されます。</p>
</div>
</div>
<div class="section" id="step-10-false-null">
<h2>Step 10: 多くの関数が要素がないとき FALSE ではなく NULL を返すようになりました<a class="headerlink" href="#step-10-false-null" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>多くのメソッドと関数は、要求された要素が存在しないとき、FALSE ではなく NULL を返すようになりました:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../general/common_functions.html"><span class="doc">共通関数</span></a><ul>
<li>config_item()</li>
</ul>
</li>
<li><a class="reference internal" href="../libraries/config.html"><span class="doc">Config クラス</span></a><ul>
<li>config-&gt;item()</li>
<li>config-&gt;slash_item()</li>
</ul>
</li>
<li><a class="reference internal" href="../libraries/input.html"><span class="doc">Input クラス</span></a><ul>
<li>input-&gt;get()</li>
<li>input-&gt;post()</li>
<li>input-&gt;get_post()</li>
<li>input-&gt;cookie()</li>
<li>input-&gt;server()</li>
<li>input-&gt;input_stream()</li>
<li>input-&gt;get_request_header()</li>
</ul>
</li>
<li><a class="reference internal" href="../libraries/sessions.html"><span class="doc">Session クラス</span></a><ul>
<li>session-&gt;userdata()</li>
<li>session-&gt;flashdata()</li>
</ul>
</li>
<li><a class="reference internal" href="../libraries/uri.html"><span class="doc">URI クラス</span></a><ul>
<li>uri-&gt;segment()</li>
<li>uri-&gt;rsegment()</li>
</ul>
</li>
<li><a class="reference internal" href="../helpers/array_helper.html"><span class="doc">Array クラス</span></a><ul>
<li>element()</li>
<li>elements()</li>
</ul>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="step-11-xss">
<h2>Step 11: XSS フィルタの使い方<a class="headerlink" href="#step-11-xss" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>CodeIgniter の多くの関数は、論理値のパラメータを渡すことで、
XSS フィルタリング機能を使うことができます。
そのデフォルト値は以前は FALSE でしたが、今は NULL に変更され、
<code class="docutils literal"><span class="pre">$config['global_xss_filtering']</span></code> の値により動的に
決定されます。</p>
<p>もし、手動で論理値を <code class="docutils literal"><span class="pre">$xss_filter</span></code> パラメータに渡していたり、
<code class="docutils literal"><span class="pre">$config['global_xss_filtering']</span></code> に FALSE を設定していた場合は、
この変更は影響しません。</p>
<p>そうでない場合は、次の関数の使い方を確認してください:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../libraries/input.html"><span class="doc">Input ライブラリ</span></a><ul>
<li>input-&gt;get()</li>
<li>input-&gt;post()</li>
<li>input-&gt;get_post()</li>
<li>input-&gt;cookie()</li>
<li>input-&gt;server()</li>
<li>input-&gt;input_stream()</li>
</ul>
</li>
<li><a class="reference internal" href="../helpers/cookie_helper.html"><span class="doc">Cookie ヘルパー</span></a> <a class="reference internal" href="../helpers/cookie_helper.html#get_cookie" title="get_cookie"><code class="xref php php-func docutils literal"><span class="pre">get_cookie()</span></code></a></li>
</ul>
</div></blockquote>
<div class="admonition important">
<p class="first admonition-title">重要</p>
<p class="last">他の関連する変更点として、 <code class="docutils literal"><span class="pre">$_GET</span></code>、<code class="docutils literal"><span class="pre">$_POST</span></code>、
<code class="docutils literal"><span class="pre">$_COOKIE</span></code> そして <code class="docutils literal"><span class="pre">$_SERVER</span></code> スーパーグローバルは、グローバル XSS
フィルタリングがオンの場合に、自動的に上書きされなくなりました。</p>
</div>
</div>
<div class="section" id="step-12-uri-xss">
<h2>Step 12: URI にまつわる潜在的な XSS 問題をチェックする<a class="headerlink" href="#step-12-uri-xss" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href="../libraries/uri.html"><span class="doc">URI ライブラリ</span></a> は以前は特定の &#8220;問題のある文字&#8221;
が URI セグメントに含まれるとき、HTML エンティティに自動的に
変換していました。</p>
<p>これは、<code class="docutils literal"><span class="pre">$config['permitted_uri_chars']</span></code> の設定に加えて、
自動 XSS 保護の提供を目的としていましたが、問題があることが判明したため、
CodeIgniter 3.0 で削除されました。</p>
<p>もし、あなたのアプリケーションがこの機能に頼っているなら、
出力時に <code class="docutils literal"><span class="pre">$this-&gt;security-&gt;xss_clean()</span></code> で URI セグメントを
フィルタするように更新するべきです。</p>
</div>
<div class="section" id="step-13-xss-clean">
<h2>Step 13: バリデーションルール &#8216;xss_clean&#8217; の使い方をチェックする<a class="headerlink" href="#step-13-xss-clean" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>XSS クリーニングについて広く知られていないルールとして、
入力データに対してではなく、<em>出力にのみ適用すべき</em> があります。</p>
<p>我々は自動グローバル XSS クリーニング機能（上の XSS についてのステップを参照）
においてミスを犯しました。そのため、現在、そのような実践に反対するために、
<a class="reference internal" href="../libraries/form_validation.html"><span class="doc">フォームバリデーション</span></a> のルールの
公式サポートリストから、&#8217;xss_clean&#8217; を削除しています。</p>
<p>何故なら、<a class="reference internal" href="../libraries/form_validation.html"><span class="doc">フォームバリデーションライブラリ</span></a>
は一般的に <em>入力</em> データを検証するため、
&#8216;xss_clean&#8217; ルールは単純にそこに属さないからです。</p>
<p>もし本当に本当にそのルールを適用する必要があるなら、
通常の関数として <code class="docutils literal"><span class="pre">xss_clean()</span></code> が含まれる
<a class="reference internal" href="../helpers/security_helper.html"><span class="doc">Security ヘルパー</span></a> をロードしてください。
通常の関数なら検証ルールとして今でも使用できます。</p>
</div>
<div class="section" id="step-14-get-post">
<h2>Step 14: 入力クラスの get_post() メソッドの使い方を更新する<a class="headerlink" href="#step-14-get-post" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>以前は、 <a class="reference internal" href="../libraries/input.html"><span class="doc">Input クラス</span></a> の <code class="docutils literal"><span class="pre">get_post()</span></code>
メソッドは最初に POST データを探し、それから GET データを探しました。
このメソッドは、その名前が示すように、GET を先に探しその後 POST を
探すように変更されました。</p>
<p>以前と同じようにするために、POST を先に探し GET を探す <code class="docutils literal"><span class="pre">post_get()</span></code> メソッドが追加されました。</p>
</div>
<div class="section" id="step-15-directory-map">
<h2>Step 15: ディレクトリヘルパーの directory_map() 関数の使い方を更新する<a class="headerlink" href="#step-15-directory-map" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>結果の配列の中で、ディレクトリはディレクトリセパレータ（通常はスラッシュ）
で終わるようになりました。</p>
</div>
<div class="section" id="step-16-drop-table">
<h2>Step 16: データベースフォージの drop_table() メソッドの使い方を更新する<a class="headerlink" href="#step-16-drop-table" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>今まで <code class="docutils literal"><span class="pre">drop_table()</span></code> は IF EXISTS 句をデフォルトで追加していましたが、
いくつかのドライバでは全く動作しませんでした。
CodeIgniter 3.0 では、IF EXISTS 条件はデフォルトでは追加されず、
オプションの第 2 引数が追加され、デフォルトは FALSE です。</p>
<p>もし、アプリケーションが IF EXISTS を使っているなら、使い方を変更する必要があります。</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="c1">// 今は DROP TABLE `table_name` だけを生成します</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dbforge</span><span class="o">-&gt;</span><span class="na">drop_table</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">);</span>

<span class="c1">// DROP TABLE IF EXISTS `table_name` を生成します</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dbforge</span><span class="o">-&gt;</span><span class="na">drop_table</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="k">TRUE</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この例では MySQL 固有の文法を使っていますが、ODBC 以外のすべての
ドライバで機能します。</p>
</div>
</div>
<div class="section" id="step-17-email">
<h2>Step 17: Email ライブラリでの複数メールの扱いを変更する<a class="headerlink" href="#step-17-email" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href="../libraries/email.html"><span class="doc">Email ライブラリ</span></a> は、メール送信が成功した後に、
自動的に設定されたパラメータをクリアします。
この振る舞いを上書きしたい場合は、<code class="docutils literal"><span class="pre">send()</span></code> メソッドの第 1 引数に FALSE
を渡します:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">email</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="k">FALSE</span><span class="p">))</span>
<span class="p">{</span>
        <span class="c1">// パラメータはクリアされません</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="step-18-form-validation">
<h2>Step 18: Form_validation の言語ファイルを更新する<a class="headerlink" href="#step-18-form-validation" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href="../libraries/form_validation.html"><span class="doc">Form Validation ライブラリ</span></a> の
<a class="reference internal" href="../libraries/language.html"><span class="doc">言語</span></a> ファイルとエラーメッセージのフォーマットに
2 つの改良が加えられました:</p>
<blockquote>
<div><ul>
<li><p class="first"><a class="reference internal" href="../libraries/language.html"><span class="doc">Language ライブラリ</span></a> の行のキーは、衝突を
避けるために、接頭辞 <strong>form_validation_</strong> を付けなければなりません:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="c1">// 以前</span>
<span class="nv">$lang</span><span class="p">[</span><span class="s1">&#39;rule&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1">// 今後</span>
<span class="nv">$lang</span><span class="p">[</span><span class="s1">&#39;form_validation_rule&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p class="first">エラーメッセージのフォーマットが名前付きパラメータを使うように変更されました。
<cite>sprintf()</cite> よりも柔軟にするためです:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="c1">// 以前</span>
<span class="s1">&#39;The %s field does not match the %s field.&#39;</span>

<span class="c1">// 今後</span>
<span class="s1">&#39;The {field} field does not match the {param} field.&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">古いフォーマットもまだ動作しますが、接頭辞のない行のキーは廃止予定
であり、CodeIgniter 3.1+ で削除される予定です。
よって、早めに更新することが推奨されます。</p>
</div>
</div>
<div class="section" id="step-19-base-url">
<h2>Step 19: &#8216;base_url&#8217; の設定値が空でないことを確認する<a class="headerlink" href="#step-19-base-url" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal"><span class="pre">$config['base_url']</span></code> が設定されていないとき、CodeIgniter は Web サイトの
ベース URL を自動的に検知しようとします。これは、純粋に新しいアプリケーションの
開発を開始する際、便利なようになされているものです。</p>
<p>自動検知は決して信頼できるものではなく、セキュリティと関連します。
だから、<strong>いつでも</strong> 手動で設定すべきものです。</p>
<p>CodeIgniter 3.0.3 での変更点の 1 つは、自動検知がどう機能するかです。
より具体的に言えば、クライアントによりリクエストされたホスト名ではなく、
サーバの IP アドレスにフォールバックするようになりました。ゆえに、
もしあなたが自動検知に頼っている場合、Web サイトの振る舞いが変更されるでしょう。</p>
<p>例えば、複数のドメインを使っていたり、<a class="reference external" href="http://">http://</a> と <a class="reference external" href="https://">https://</a> の両方のプリフィックス
をリクエストに応じて動的に使っている場合、
<em>application/config/config.php</em> は PHP スクリプトであることを思い出してください。
例えば、次のような数行のコードでロジックを記述できます:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="nv">$allowed_domains</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;domain1.tld&#39;</span><span class="p">,</span> <span class="s1">&#39;domain2.tld&#39;</span><span class="p">);</span>
<span class="nv">$default_domain</span>  <span class="o">=</span> <span class="s1">&#39;domain1.tld&#39;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">],</span> <span class="nv">$allowed_domains</span><span class="p">,</span> <span class="k">TRUE</span><span class="p">))</span>
<span class="p">{</span>
        <span class="nv">$domain</span> <span class="o">=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_HOST&#39;</span><span class="p">];</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
        <span class="nv">$domain</span> <span class="o">=</span> <span class="nv">$default_domain</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTPS&#39;</span><span class="p">]))</span>
<span class="p">{</span>
        <span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;https://&#39;</span><span class="o">.</span><span class="nv">$domain</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
        <span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;base_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;http://&#39;</span><span class="o">.</span><span class="nv">$domain</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="step-20">
<h2>Step 20: (以前から) 廃止予定の機能を削除する<a class="headerlink" href="#step-20" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><code class="docutils literal"><span class="pre">$autoload['core']</span></code> の設定以外にも、CodeIgniter 3.0.0 で削除された機能は
たくさんあります。</p>
<div class="section" id="sha1">
<h3>SHA1 ライブラリ<a class="headerlink" href="#sha1" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以前から廃止予定だった SHA1 ライブラリが削除されました。
SHA1 ハッシュを生成するには、PHP のネイティブの <code class="docutils literal"><span class="pre">sha1()</span></code> 関数を使うようにコードを変更してください。</p>
<p>加えて、<a class="reference internal" href="../libraries/encrypt.html"><span class="doc">Encrypt ライブラリ</span></a> の <code class="docutils literal"><span class="pre">sha1()</span></code> メソッド も削除されました。</p>
</div>
<div class="section" id="ext">
<h3>EXT 定数<a class="headerlink" href="#ext" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>PHP 4 のサポートをドロップして以来、<code class="docutils literal"><span class="pre">EXT</span></code> 定数の使用は推奨されていません。この
新しい CodeIgniter のバージョンで、もはや異なるファイル名の拡張子を保持する必要は
ありません。<code class="docutils literal"><span class="pre">EXT</span></code> 定数は削除されました。代わりに、単に &#8216;.php&#8217; を使って下さい。</p>
</div>
<div class="section" id="smiley">
<h3>Smiley ヘルパー<a class="headerlink" href="#smiley" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/smiley_helper.html"><span class="doc">Smiley ヘルパー</span></a> は EllisLab の製品
ExpressEngine 由来のレガシーな機能です。CodeIgniter のような一般的な用途の
フレームワークにとっては、具体的すぎるため、廃止予定となりました。</p>
<p>また、以前から廃止予定の <code class="docutils literal"><span class="pre">js_insert_smiley()</span></code> （バージョン 1.7.2 から）は削除されました。</p>
</div>
<div class="section" id="encrypt">
<h3>Encrypt ライブラリ<a class="headerlink" href="#encrypt" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>多数の脆弱性報告に従い、 <a class="reference internal" href="../libraries/encrypt.html"><span class="doc">Encrypt ライブラリ</span></a> は
廃止予定となり、新たな <a class="reference internal" href="../libraries/encryption.html"><span class="doc">Encryption ライブラリ</span></a>
が代わりに追加されました。</p>
<p>新しいライブラリは <a class="reference external" href="http://php.net/mcrypt">MCrypt 機能拡張</a>
（そして /dev/urandom が利用可能なこと）または PHP 5.3.3 と
<a class="reference external" href="http://php.net/openssl">OpenSSL 機能拡張</a> を必要とします。
これは少々不便ですが、暗号の機能を適切に実装するための必要条件です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last"><a class="reference internal" href="../libraries/encrypt.html"><span class="doc">Encrypt ライブラリ</span></a> はまだ後方互換の
ために使用可能です。</p>
</div>
<div class="admonition important">
<p class="first admonition-title">重要</p>
<p class="last">できるだけ早く新しい <a class="reference internal" href="../libraries/encryption.html"><span class="doc">Encryption ライブラリ</span></a> に移行することが強く推奨されます！</p>
</div>
</div>
<div class="section" id="cart">
<h3>Cart ライブラリ<a class="headerlink" href="#cart" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../libraries/cart.html"><span class="doc">Cart ライブラリ</span></a> は <a class="reference internal" href="../helpers/smiley_helper.html"><span class="doc">Smiley ヘルパー</span></a> と同じように、CodeIgniter にとっては具体的
過ぎます。現在、廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">このライブラリはまだ使用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="mysql-sqlite-mssql-pdo-dblib">
<h3>データベースドライバ &#8216;mysql&#8217;、&#8217;sqlite&#8217;、&#8217;mssql&#8217;、&#8217;pdo/dblib&#8217;<a class="headerlink" href="#mysql-sqlite-mssql-pdo-dblib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><strong>mysql</strong> ドライバは、古いコードベースと多くの低レベルでの問題で知られる、古い &#8216;mysql&#8217; PHP 機能拡張を利用します。
この機能拡張は PHP 5.5 で廃止予定となり、CodeIgniter ではバージョン 3.0 で
廃止予定となり、デフォルトの MySQL ドライバ設定は <strong>mysqli</strong> に変更されました。</p>
<p>&#8216;mysqli&#8217; または &#8216;pdo/mysql&#8217; ドライバのいずれかを使用してください。古い
&#8216;mysql&#8217; ドライバは将来削除されます。</p>
<p><strong>sqlite</strong>、<strong>mssql</strong> そして <strong>pdo/dblib</strong> （pdo/mssql または pdo/sybase としても知られる）ドライバはすべて、さまざまな理由から PHP 5.3 には存在しない PHP 機能拡張に依存しています。</p>
<p>それゆえ、それらのドライバも廃止予定であり、CodeIgniter の次のバージョンで
削除されます。
より進歩した <strong>sqlite3</strong>、<strong>sqlsrv</strong> または <strong>pdo/sqlsrv</strong> ドライバを
使うべきです。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">これらのドライバはまだ使用可能ですが、早急に他のドライバに
変更することを強く推奨します。</p>
</div>
</div>
<div class="section" id="security-do-hash">
<h3>Security ヘルパーの do_hash()<a class="headerlink" href="#security-do-hash" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/security_helper.html"><span class="doc">Security ヘルパー</span></a> の関数 <code class="docutils literal"><span class="pre">do_hash()</span></code> は
現在 PHP のネイティブ <code class="docutils literal"><span class="pre">hash()</span></code> 関数の単なるエイリアスです。廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">このライブラリはまだ使用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="config-global-xss-filtering">
<h3>$config[&#8216;global_xss_filtering&#8217;] 設定<a class="headerlink" href="#config-global-xss-filtering" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>上記ですでに説明したように、XSS フィルタリングは入力データに対しするものではなく、
出力にすべきものです。ゆえに、自動的に <em>入力</em> データをフィルタする
<code class="docutils literal"><span class="pre">$config['global_xss_filtering']</span></code> は悪い実践だと考えられ、
廃止予定とされました。</p>
<p>代わりに、出力が必要なときに <a class="reference internal" href="../helpers/security_helper.html#xss_clean" title="xss_clean"><code class="xref php php-func docutils literal"><span class="pre">xss_clean()</span></code></a> 関数を使い、
ユーザの提供したデータを手動でエスケープするか、
<a class="reference external" href="http://htmlpurifier.org/">HTML Purifier</a> のようなライブラリを
使って下さい。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この設定はまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="file-read-file">
<h3>File ヘルパーの read_file()<a class="headerlink" href="#file-read-file" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/file_helper.html"><span class="doc">File ヘルパー</span></a> の <code class="docutils literal"><span class="pre">read_file()</span></code> 関数は、
現在単なる PHP のネイティブ関数 <code class="docutils literal"><span class="pre">file_get_contents()</span></code> のエイリアスです。
廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この関数はまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="string-repeater">
<h3>String ヘルパーの repeater()<a class="headerlink" href="#string-repeater" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/string_helper.html"><span class="doc">String ヘルパー</span></a> の <a class="reference internal" href="../helpers/string_helper.html#repeater" title="repeater"><code class="xref php php-func docutils literal"><span class="pre">repeater()</span></code></a>
関数は、現在単なる PHP のネイティブ関数 <code class="docutils literal"><span class="pre">str_repeat()</span></code> のエイリアスです。廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この関数はまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="string-trim-slashes">
<h3>String ヘルパーの trim_slashes()<a class="headerlink" href="#string-trim-slashes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/string_helper.html"><span class="doc">String ヘルパー</span></a> の <a class="reference internal" href="../helpers/string_helper.html#trim_slashes" title="trim_slashes"><code class="xref php php-func docutils literal"><span class="pre">trim_slashes()</span></code></a> 関数は、現在単なる PHP のネイティブ関数
<code class="docutils literal"><span class="pre">trim()</span></code> （第 2 引数にスラッシュが渡されて）のエイリアスです。
廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この関数はまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="form-form-prep">
<h3>Form ヘルパーの form_prep()<a class="headerlink" href="#form-form-prep" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/form_helper.html"><span class="doc">Form ヘルパー</span></a> の <a class="reference internal" href="../helpers/form_helper.html#form_prep" title="form_prep"><code class="xref php php-func docutils literal"><span class="pre">form_prep()</span></code></a>
関数は、現在、 <a class="reference internal" href="../general/common_functions.html"><span class="doc">共通関数</span></a>
<code class="xref py py-func docutils literal"><span class="pre">html_escape()</span></code> の単なるエイリアスです。 廃止予定であり、将来削除される予定です。</p>
<p>代わりに <a class="reference internal" href="../general/common_functions.html#html_escape" title="html_escape"><code class="xref php php-func docutils literal"><span class="pre">html_escape()</span></code></a> を使って下さい。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この関数はまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="email">
<h3>Email ヘルパーの関数<a class="headerlink" href="#email" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/email_helper.html"><span class="doc">Email ヘルパー</span></a> は 2 つの関数しか持っていません。</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../helpers/email_helper.html#valid_email" title="valid_email"><code class="xref php php-func docutils literal"><span class="pre">valid_email()</span></code></a></li>
<li><a class="reference internal" href="../helpers/email_helper.html#send_email" title="send_email"><code class="xref php php-func docutils literal"><span class="pre">send_email()</span></code></a></li>
</ul>
</div></blockquote>
<p>どちらも現在 PHP ネイティブ関数 <code class="docutils literal"><span class="pre">filter_var()</span></code> と <code class="docutils literal"><span class="pre">mail()</span></code> のエイリアスです。
よって、<a class="reference internal" href="../helpers/email_helper.html"><span class="doc">Email ヘルパー</span></a> は廃止予定とされ、
CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この関数はまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="date-standard-date">
<h3>Date ヘルパーの standard_date()<a class="headerlink" href="#date-standard-date" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/date_helper.html"><span class="doc">Date ヘルパー</span></a> の <code class="docutils literal"><span class="pre">standard_date()</span></code> 関数は、
ネイティブの PHP <a class="reference external" href="http://php.net/manual/en/class.datetime.php#datetime.constants.types">定数</a> と <code class="docutils literal"><span class="pre">date()</span></code> を組み合わせて
同じ機能を提供できるため、廃止予定とされました。
さらに、<cite>standard_date()`</cite> でサポートされているものと全く同じ名前を使えます。
置き換えの例は次のようになります:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="c1">// 以前の方法</span>
<span class="nx">standard_date</span><span class="p">();</span> <span class="c1">// デフォルトは standard_date(&#39;DATE_RFC822&#39;, now());</span>

<span class="c1">// 置き換え</span>
<span class="nb">date</span><span class="p">(</span><span class="nx">DATE_RFC822</span><span class="p">,</span> <span class="nx">now</span><span class="p">());</span>

<span class="c1">// 以前の方法</span>
<span class="nx">standard_date</span><span class="p">(</span><span class="s1">&#39;DATE_ATOM&#39;</span><span class="p">,</span> <span class="nv">$time</span><span class="p">);</span>

<span class="c1">// 置き換え</span>
<span class="nb">date</span><span class="p">(</span><span class="nx">DATE_ATOM</span><span class="p">,</span> <span class="nv">$time</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この関数はまだ利用可能ですが、CodeIgniter 3.1+ で削除される予定のため
早急に使用を止めることを強く推奨します。</p>
</div>
</div>
<div class="section" id="html-nbs-br">
<h3>HTML ヘルパーの nbs()、br()<a class="headerlink" href="#html-nbs-br" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/html_helper.html"><span class="doc">HTML ヘルパー</span></a> の関数 <code class="docutils literal"><span class="pre">nbs()</span></code> と <code class="docutils literal"><span class="pre">br()</span></code> は
<code class="docutils literal"><span class="pre">&amp;nbsp;</span></code> と <code class="docutils literal"><span class="pre">&lt;br</span> <span class="pre">&gt;</span></code> を使った場合のネイティブ関数 <code class="docutils literal"><span class="pre">str_repeat()</span></code> の単なるエイリアスです。</p>
<p>PHP ネイティブ関数の単なるエイリアスというだけなので、廃止予定とされ、
CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この関数はまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="pagination-anchor-class">
<h3>Pagination ライブラリの &#8216;anchor_class&#8217; 設定<a class="headerlink" href="#pagination-anchor-class" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../libraries/pagination.html"><span class="doc">Pagination ライブラリ</span></a> は現在、&#8217;attributes&#8217; 設定を使うことで、アンカーにあらゆる HTML 属性を追加できます。
これにより、&#8217;class&#8217; 属性も設定できるため、別の &#8216;anchor_class&#8217; 設定を使う意味は
もはやありません。
そこで &#8216;anchor_class&#8217; 設定は廃止予定になり、CodeIgniter 3.1+ で
削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">この設定はまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="string-random-string-unique-encrypt">
<h3>String ヘルパーの random_string() のタイプ &#8216;unique&#8217; と &#8216;encrypt&#8217;<a class="headerlink" href="#string-random-string-unique-encrypt" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/string_helper.html"><span class="doc">String ヘルパー</span></a> の
<a class="reference internal" href="../helpers/string_helper.html#random_string" title="random_string"><code class="xref php php-func docutils literal"><span class="pre">random_string()</span></code></a> 関数を使う際、 <strong>unique</strong> と <strong>encrypt</strong> をランダム化のタイプとして使うことはできなくなりました。
それらは、単に <strong>md5</strong> と <strong>sha1</strong> へのエイリアスです。
廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">これらのオプションはまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="url-url-title-dash-and-underscore">
<h3>URL ヘルパーの url_title() のセパレータ &#8216;dash&#8217; and &#8216;underscore&#8217;<a class="headerlink" href="#url-url-title-dash-and-underscore" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../helpers/url_helper.html"><span class="doc">URL ヘルパー</span></a> の <a class="reference internal" href="../helpers/url_helper.html#url_title" title="url_title"><code class="xref php php-func docutils literal"><span class="pre">url_title()</span></code></a> 関数を
使う際、区切り文字として <strong>dash</strong> と <strong>underscore</strong> は使えません。
この関数は現在、どんな文字も受け取りますので、選択した文字を直接渡して下さい。
&#8216;dash&#8217; の代わりに &#8216;-&#8216; を、&#8217;underscore&#8217; の代わりに &#8216;_&#8217; を記述してください。</p>
<p><strong>dash</strong> と <strong>underscore</strong> は、現在、エイリアスとして振る舞いますが、これらは廃止予定であり、
CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">これらのオプションはまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="session-all-userdata">
<h3>Session ライブラリの all_userdata() メソッド<a class="headerlink" href="#session-all-userdata" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../changelog.html"><span class="doc">変更履歴</span></a> で見たように、 <a class="reference internal" href="../libraries/sessions.html"><span class="doc">Session ライブラリ</span></a>
の <code class="docutils literal"><span class="pre">userdata()</span></code> メソッドは、パラメータなしの場合、すべてのユーザデータを返します:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">session</span><span class="o">-&gt;</span><span class="na">userdata</span><span class="p">();</span>
</pre></div>
</div>
<p>これにより、<code class="docutils literal"><span class="pre">all_userdata()</span></code> メソッドは冗長となり、現在、上記の
<code class="docutils literal"><span class="pre">userdata()</span></code> への単なるエイリアスです。
廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">このメソッドはまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="database-forge-after-add-column">
<h3>Database Forge の AFTER 句を伴う add_column() メソッド<a class="headerlink" href="#database-forge-after-add-column" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>もし、<a class="reference internal" href="../database/forge.html"><span class="doc">Database Forge</span></a> の
<code class="docutils literal"><span class="pre">add_column()</span></code> メソッドの <strong>第 3 引数</strong> を、AFTER 句にフィールドを追加するために使っていたなら、使い方を変更する必要があります。</p>
<p>その第 3 引数は廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<p>代わりに AFTER 句のフィールド名は、フィールド定義の配列に記述します:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="c1">// 以前の使い方:</span>
<span class="nv">$field</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;new_field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;TEXT&#39;</span><span class="p">)</span>
<span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dbforge</span><span class="o">-&gt;</span><span class="na">add_column</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="nv">$field</span><span class="p">,</span> <span class="s1">&#39;another_field&#39;</span><span class="p">);</span>

<span class="c1">// 新しい使い方:</span>
<span class="nv">$field</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;new_field&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;TEXT&#39;</span><span class="p">,</span> <span class="s1">&#39;after&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;another_field&#39;</span><span class="p">)</span>
<span class="p">);</span>

<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dbforge</span><span class="o">-&gt;</span><span class="na">add_column</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="nv">$field</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">このパラメータはまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">これは MySQL と CUBRID データベースだけで使えます！　他のドライバはこの句をサポートしておらず、
黙って無視します。</p>
</div>
</div>
<div class="section" id="uri-fetch-directory-fetch-class-fetch-method">
<h3>URI ルーティングのメソッド fetch_directory()、fetch_class()、fetch_method()<a class="headerlink" href="#uri-fetch-directory-fetch-class-fetch-method" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>プロパティ <code class="docutils literal"><span class="pre">CI_Router::$directory</span></code>、<code class="docutils literal"><span class="pre">CI_Router::$class</span></code> そして <code class="docutils literal"><span class="pre">CI_Router::$method</span></code>
は public であり、対応する <code class="docutils literal"><span class="pre">fetch_*()</span></code> はそれらのプロパティを返すだけです。
なので、これらのメソッドを持つ意味はありません。</p>
<p>これらはすべて内部的な文書化されていないメソッドですが、もしもの
後方互換性を維持するため、廃止予定とします。
もし、これらのメソッドを使っている人は、代わりにプロパティにアクセスしてください:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">directory</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">class</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">method</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">これらのメソッドはまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="input-is-cli-request">
<h3>Input ライブラリの is_cli_request() メソッド<a class="headerlink" href="#input-is-cli-request" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal"><span class="pre">CI_Input::is_cli_request()</span></code> メソッドの呼び出しは CodeIgniter の内部の
たくさんの場所で必要であり、しばしば、<a class="reference internal" href="../libraries/input.html"><span class="doc">Input Library</span></a> がロードされる前に起こります。そのため、共通関数の
<a class="reference internal" href="../general/common_functions.html#is_cli" title="is_cli"><code class="xref php php-func docutils literal"><span class="pre">is_cli()</span></code></a> 関数に置き換えられ、このメソッドは現在単なるエイリアスです。</p>
<p>新しい関数はいつでも利用可能であり、タイプする文字も少なくて済みます。</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="c1">// 以前</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">input</span><span class="o">-&gt;</span><span class="na">is_cli_request</span><span class="p">();</span>

<span class="c1">// 以後</span>
<span class="nx">is_cli</span><span class="p">();</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">CI_Input::is_cli_request()</span></code> は現在廃止予定であり、
CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">このメソッドはまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="config-system-url">
<h3>Config ライブラリの system_url() メソッド<a class="headerlink" href="#config-system-url" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal"><span class="pre">CI_Config::system_url()</span></code> の使用は安全でないコーディングの実践を推奨してしまいます。
すなわち、CodeIgniter の <em>system/</em> ディレクトリは、セキュリティの観点から、
外部からアクセス可能であるべきではありません。</p>
<p>そのため、このメソッドは現在、廃止予定であり、
CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">このメソッドはまだ利用可能ですが、早急に使用を止めることを強く
推奨します。</p>
</div>
</div>
<div class="section" id="the-javascript">
<h3>The Javascript ライブラリ<a class="headerlink" href="#the-javascript" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../libraries/javascript.html"><span class="doc">Javascript ライブラリ</span></a> は今までずっと &#8216;実験&#8217;
状態であり、そんなに役に立たず、また、適切な解決策でもありませんでした。</p>
<p>現在、廃止予定であり、CodeIgniter 3.1+ で削除される予定です。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">このライブラリはまだ使えますが、早急に使用を中止することを
強く推奨します。</p>
</div>
</div>
<div class="section" id="form-validation-method-prep-for-form">
<h3>Form Validation method prep_for_form()<a class="headerlink" href="#form-validation-method-prep-for-form" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The <a class="reference internal" href="../libraries/form_validation.html"><span class="doc">Form Validation Library</span></a> has a
<code class="docutils literal"><span class="pre">prep_for_form()</span></code> method, which is/can also be used as a rule in
<code class="docutils literal"><span class="pre">set_rules()</span></code> to automatically perform HTML encoding on input data.</p>
<p>Automatically encoding input (instead of output) data is a bad practice in
the first place, and CodeIgniter and PHP itself offer other alternatives
to this method anyway.
For example, <a class="reference internal" href="../helpers/form_helper.html"><span class="doc">Form Helper</span></a> functions will
automatically perform HTML escaping when necessary.</p>
<p>Therefore, the <em>prep_for_form</em> method/rule is pretty much useless and is now
deprecated and scheduled for removal in 3.1+.</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">The method is still available, but you&#8217;re strongly encouraged to
remove its usage sooner rather than later.</p>
</div>
</div>
</div>
<div class="section" id="step-21-text-highlight-phrase">
<h2>Step 21: Text ヘルパーの highlight_phrase() の使い方を確認する<a class="headerlink" href="#step-21-text-highlight-phrase" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference internal" href="../helpers/text_helper.html"><span class="doc">Text ヘルパー</span></a> の
<code class="xref py py-func docutils literal"><span class="pre">highlight_phrase()</span></code> 関数が使うデフォルトの HTML タグは
<code class="docutils literal"><span class="pre">&lt;strong&gt;</span></code> から 新しい HTML5 の <code class="docutils literal"><span class="pre">&lt;mark&gt;</span></code> タグに変更されました。</p>
<p>独自のハイライトタグを使っていない限り、この変更は Internet Explorer 8 のような
より古い Web ブラウザを使っているユーザにトラブルを起こすかも知れません。
そこで、古いブラウザでの後方互換のために、以下のコードを CSS ファイルに
追加することを提案します:</p>
<div class="highlight-ci"><div class="highlight"><pre><span></span><span class="nx">mark</span> <span class="p">{</span>
        <span class="nx">background</span><span class="o">:</span> <span class="c1">#ff0;</span>
        <span class="nx">color</span><span class="o">:</span> <span class="c1">#000;</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="upgrade_223.html" class="btn btn-neutral float-right" title="Upgrading from 2.2.2 to 2.2.3">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="upgrade_301.html" class="btn btn-neutral" title="3.0.0 から 3.0.1 へのアップグレード"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 - 2016, British Columbia Institute of Technology.
      最終更新: 9月 27, 2016<br />Japanese Translation: <a href="http://codeigniter.jp/">CodeIgniter Users Group in Japan</a>（この日本語訳のライセンスは、<a href="https://github.com/codeigniter-jp/user_guide_src_ja/blob/develop_japanese/LICENSE.md">LICENSE.md</a> を参照してください）
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.2.0-dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>